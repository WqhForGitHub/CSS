这种自动确定位置的机制只在特定情况下才起作用，一般来说只要对定位元素的其他尺寸没有太多限制，都会使用这个机制。之所以下面的例子能自动确定位置，是因为没有限制元素的高度和宽度，也没有限定下边界和右边界的位置。

```html
<p>
  When we consider the effect of positioning, it quickly becomes clear that
  authors can do a great deal of damage to layout, just as they can do very
  interesting things. <span style="position: absolute; top: auto; left: 0;">[4]</span>
  This is usually the case with useful technologies:
  the sword always has at least two edges, both of them sharp.
</p>
```

```html
<p>
  When we consider the effect of positioning, it quickly becomes clear that
  authors can do a great deal of damage to layout, just as they can do very
  interesting things. <span style="position: absolute; top: auto; left: auto;">[4]</span>
  This is usually the case with useful technologies:
  the sword always has at least two edges, both of them sharp.
</p>
```



1.   非替换元素的位置和尺寸

以定位元素的宽度和横向位置为例。二者要满足下述等式：

left  +  margin-left  +  border-left-width  +  padding-left  +  width  +  padding-right  +  border-right-width  +  margin-right  +  right  = 容纳块的宽度

```html
<div style="position: relative; width: 25em; border: 1px dotted;">
  An absolutelyy positioned element can have its content 
  <span style="position: absolute; top: 0;left: 0; right: auto; 
    width: auto; background: silver;">
  shrink-wrapped</span>
</div>
```

总结：元素的顶边与容纳块的顶边重合，而元素的宽度正好能放得下内容。元素右边界到容纳块右边界之间的距离都变成 right 的计算值。



```html
<div style="position: relative;  width: 25em; border: 1px dotted;">
  An absolutely positioned element can have its content <span style="position: absolute;
  top: 0; left: 1em; right: 1em; width: 10em; margin: 0 auto; background: silver;">
    shrink-wrapped
  </span> thanks to the way positioning rules work.
</div>
```



```html
<div style="position: relative;  width: 25em; border: 1px dotted;">
  An absolutely positioned element can have its content 
  <span style="position: absolute;
  top: 0; left: 1em; right: 1em; width: 10em; 
  margin-left: 1em; margin-right: 1em; background: silver;">
    shrink-wrapped
  </span> thanks to the way positioning rules work.
</div>
```

总结：各个属性的值加在一起只有 14 em，而容纳块的宽度是 25 em。二者相差 11em，这是我们要找补的。

根据规则，在这种情况下，用户代理将忽略为 right 属性声明的值，补上差值。right 值改为 12em。



```html
<span style="position: absolute;
  top: 0; left: 1em; right: 1em; width: 10em; 
  margin-left: 1em; margin-right: auto; 
  background: silver;">
    shrink-wrapped
</span>
```

总结：计算得到的右外边距是 12 em, right 属性的值不再被覆盖。



```html
<span style="position: absolute;
  top: 0; left: 1em; right: 1em; width: 10em; 
  margin-left: auto; margin-right: 1em; 
  background: silver;">
    shrink-wrapped 
</span>
```

总结：如果设为 auto 的是左外边距，右外边距的值将被重置。



```html
<span style="position: absolute;
  top: 0; left: 1em; right: 1em; width: auto;
  margin-left: 1em; margin-right: 1em; 
  background: silver;">
    shrink-wrapped
</span>
```



3. 绝对定位元素的纵向布局行为

```html
<div style="position: relative; width: 30em; height: 10em; border: 1px solid;">
  <div style="position: absolute; left: 0; width: 30%; background: #CCC; top: 0;">
    element A
  </div>

  <div style="position: absolute; left: 35%; width: 30%; background: #AAA; top: 0;
    height: 50%">
    element B
  </div>

  <div style="position: absolute; left: 70%; width: 30%; background: #CCC; 
    height: 50%;
    bottom: 0;"></div>
</div>
```



```html
<div style="position: relative; width: 10em; height: 10em; border: 1px solid;">
  <div style="position: absolute; left: 0; width: 100%; background: #CCC;
    top: 0; height: 5em; bottom: 0; margin: auto 0;">
    element D
  </div>
</div>
```

有两点细微差别要指出：在横向布局中，如果 right 或 left 的值为 auto，左右边界的位置根据静态位置确定。而在纵向布局中，只有 top 根据静态位置确定；bottom 在任何情况下都不这样确定。

```html
<div style="position: relative; width: 10em; height: 10em; border: 1px solid;">
  <div style="position: absolute; left: 0; width: 100%; background: #CCC;
    top: 0; height: 5em; bottom: 0; margin: 0;">
    element D
  </div>
</div>
```



4. 替换元素的位置和尺寸
+ 如果把 width 设为 auto，width 的具体值由元素内容的内在宽度确定。因此，如果图像自身的宽度是 50 像素，那么计算得到的值是 50px。如果明确声明了 width，那就使用设定的值。
+ 在从左至右书写的语言中，如果 left 的值是 auto，auto 将替换为静态位置。
+ 如果 left 或 right 的值仍是 auto，把 margin-left 和 margin-right 的值仍为 auto 值替换为 0。
+ 如果此时 margin-left 和 margin-right 的值仍为 auto，把二者设为相等的值，即让元素居中显示在容纳块中。
+ 最后，如果还有一个属性的值为 auto，修改为满足等式所需的值。



纵轴布局由下述规则控制：

+ 如果把 height 设为 auto，height 的具体值由元素内容的内在高度确定。因此，如果图像自身的高度是 50 像素，那么计算得到的值是 50px。如果明确声明了 height ，那就使用设定的值。
+ 如果 top 的值是 auto，替换为置换元素的静态位置。
+ 如果 bottom 的值是 auto，把值为 auto 的 margin-top 或 margin-bottom 替换为 0。
+ 如果此时 margin-top 和 margin-bottom 的值仍为 auto，把二者设为相等的值，即让元素居中显示在容纳块中。
+ 最后，如果还有一个属性的值为 auto，修改为满足等式所需的值。



+ 粘滞定位

position 设置为 sticky 即可。

